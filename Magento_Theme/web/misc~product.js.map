{"version":3,"sources":["webpack:///./src/app/component/AddToCart/AddToCart.component.js","webpack:///./src/app/component/AddToCart/AddToCart.container.js","webpack:///./src/app/component/AddToCart/AddToCart.style.scss","webpack:///./src/app/component/AddToCart/index.js"],"names":["AddToCart","props","isLoading","mix","isPlaceholder","type_id","product","buttonClick","renderPlaceholder","__","Object","defineProperty","_AddToCart","value","PropTypes","bool","ProductType","MixType","func","isRequired","CartDispatcher","WishlistDispatcher","mapStateToProps","state","wishlistItems","WishlistReducer","productsInWishlist","mapDispatchToProps","dispatch","addProduct","options","then","dispatcher","default","addProductToCart","removeFromWishlist","removeItemFromWishlist","showNotification","type","message","AddToCartContainer","bind","CONFIGURABLE","validateConfigurableProduct","GROUPED","validateGroupedProduct","BUNDLE","validateBundleProduct","addConfigurableProductToCart","addGroupedProductToCart","configurableVariantIndex","variants","configurableStock","stock_status","groupedProductQuantity","items","isAllItemsAvailable","every","id","productOptionsData","validateBundleOptions","validateCustomizableOptions","isBundle","requiredOptions","length","productOptions","productOptionsMulti","validateProductOptions","requiredOption","find","item","option_id","matchWith","validationRule","validationMap","validateSimpleProduct","Promise","all","map","groupedProductItem","newProduct","parent","quantity","resolve","afterAddToCart","resetLoading","addToCartHandler","addToCartHandlerMap","addSimpleProductToCart","onProductValidationError","validateAddToCart","setState","sku","wishlistItemKey","keys","key","wSku","wishlist","isSignedIn","undefined","item_id","noMessage","setQuantityToDefault","removeProductFromWishlist","containerFunctions","_AddToCartContainer","number","objectOf","object","connect"],"mappings":"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","file":"misc~product.js","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { MixType } from 'Type/Common';\nimport { ProductType } from 'Type/ProductList';\n\nimport './AddToCart.style';\n\n/**\n * Button for adding product to Cart\n * @class AddToCart\n * @namespace Component/AddToCart/Component\n */\nexport class AddToCart extends PureComponent {\n    static propTypes = {\n        isLoading: PropTypes.bool,\n        product: ProductType,\n        mix: MixType,\n        buttonClick: PropTypes.func.isRequired\n    };\n\n    static defaultProps = {\n        product: {},\n        mix: {},\n        isLoading: false\n    };\n\n    renderPlaceholder() {\n        const { isLoading, mix } = this.props;\n\n        return (\n            <div\n              block=\"AddToCart\"\n              mods={ { isLoading, isPlaceholder: true } }\n              mix={ mix }\n            />\n        );\n    }\n\n    render() {\n        const {\n            mix,\n            product: { type_id },\n            isLoading,\n            buttonClick\n        } = this.props;\n\n        if (!type_id) {\n            this.renderPlaceholder();\n        }\n\n        return (\n            <button\n              onClick={ buttonClick }\n              block=\"Button AddToCart\"\n              mix={ mix }\n              mods={ { isLoading } }\n              disabled={ isLoading }\n            >\n                <span>{ __('Add to cart') }</span>\n                <span>{ __('Adding...') }</span>\n            </button>\n        );\n    }\n}\n\nexport default AddToCart;\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport { showNotification } from 'Store/Notification/Notification.action';\nimport { ProductType } from 'Type/ProductList';\nimport { isSignedIn } from 'Util/Auth';\nimport {\n    BUNDLE,\n    CONFIGURABLE,\n    GROUPED\n} from 'Util/Product';\n\nimport AddToCart from './AddToCart.component';\n\nexport const CartDispatcher = import(\n    /* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\n    'Store/Cart/Cart.dispatcher'\n);\n\nexport const WishlistDispatcher = import(\n    /* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\n    'Store/Wishlist/Wishlist.dispatcher'\n);\n\n/** @namespace Component/AddToCart/Container/mapStateToProps */\nexport const mapStateToProps = (state) => ({\n    wishlistItems: state.WishlistReducer.productsInWishlist\n});\n\n/** @namespace Component/AddToCart/Container/mapDispatchToProps */\nexport const mapDispatchToProps = (dispatch) => ({\n    addProduct: (options) => CartDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.addProductToCart(dispatch, options)\n    ),\n    removeFromWishlist: (options) => WishlistDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.removeItemFromWishlist(dispatch, options)\n    ),\n    showNotification: (type, message) => dispatch(showNotification(type, message))\n});\n\n/* @namespace Component/AddToCart/Container */\nexport class AddToCartContainer extends PureComponent {\n    static propTypes = {\n        isLoading: PropTypes.bool,\n        product: ProductType.isRequired,\n        quantity: PropTypes.number,\n        configurableVariantIndex: PropTypes.number,\n        groupedProductQuantity: PropTypes.objectOf(PropTypes.number).isRequired,\n        showNotification: PropTypes.func.isRequired,\n        setQuantityToDefault: PropTypes.func,\n        addProduct: PropTypes.func.isRequired,\n        removeFromWishlist: PropTypes.func.isRequired,\n        wishlistItems: PropTypes.objectOf(ProductType).isRequired,\n        onProductValidationError: PropTypes.func,\n        productOptionsData: PropTypes.object.isRequired\n    };\n\n    static defaultProps = {\n        quantity: 1,\n        configurableVariantIndex: 0,\n        setQuantityToDefault: () => {},\n        onProductValidationError: () => {},\n        isLoading: false\n    };\n\n    state = { isLoading: false };\n\n    containerFunctions = {\n        buttonClick: this.buttonClick.bind(this)\n    };\n\n    validationMap = {\n        [CONFIGURABLE]: this.validateConfigurableProduct.bind(this),\n        [GROUPED]: this.validateGroupedProduct.bind(this),\n        [BUNDLE]: this.validateBundleProduct.bind(this)\n    };\n\n    addToCartHandlerMap = {\n        [CONFIGURABLE]: this.addConfigurableProductToCart.bind(this),\n        [GROUPED]: this.addGroupedProductToCart.bind(this)\n    };\n\n    validateConfigurableProduct() {\n        const {\n            configurableVariantIndex,\n            showNotification,\n            product: {\n                variants = []\n            }\n        } = this.props;\n\n        if (configurableVariantIndex < 0 || !variants[configurableVariantIndex]) {\n            showNotification('info', __('Please select product options!'));\n            return false;\n        }\n\n        const { stock_status: configurableStock } = variants[configurableVariantIndex];\n\n        if (configurableStock !== 'IN_STOCK') {\n            showNotification('info', __('Sorry! The selected product option is out of stock!'));\n            return false;\n        }\n\n        return true;\n    }\n\n    validateGroupedProduct() {\n        const {\n            groupedProductQuantity,\n            showNotification,\n            product: {\n                items\n            }\n        } = this.props;\n\n        const isAllItemsAvailable = items.every(({ product: { id } }) => groupedProductQuantity[id]);\n\n        if (!isAllItemsAvailable) {\n            showNotification('info', __('Sorry! Child product quantities are invalid!'));\n            return false;\n        }\n\n        return true;\n    }\n\n    validateBundleProduct() {\n        const {\n            productOptionsData,\n            showNotification\n        } = this.props;\n\n        const validateBundleOptions = this.validateCustomizableOptions(productOptionsData, true);\n\n        if (!validateBundleOptions) {\n            showNotification('info', __('Please select required option!'));\n            return false;\n        }\n\n        return true;\n    }\n\n    validateSimpleProduct() {\n        const {\n            productOptionsData,\n            showNotification\n        } = this.props;\n\n        const validateCustomizableOptions = this.validateCustomizableOptions(productOptionsData);\n\n        if (!validateCustomizableOptions) {\n            showNotification('info', __('Please select required option!'));\n            return false;\n        }\n\n        return true;\n    }\n\n    validateCustomizableOptions(productOptionsData, isBundle = false) {\n        const {\n            requiredOptions = {}\n        } = productOptionsData || {};\n\n        if (requiredOptions.length) {\n            const {\n                productOptions,\n                productOptionsMulti,\n                requiredOptions\n            } = productOptionsData;\n\n            return this.validateProductOptions(\n                [...productOptions || [], ...productOptionsMulti || []],\n                requiredOptions,\n                isBundle\n            );\n        }\n\n        return true;\n    }\n\n    validateProductOptions(items, requiredOptions, isBundle = false) {\n        // Make sure EVERY required option is FOUND in selected items\n        return requiredOptions.every((requiredOption) => (\n            items.find((item) => {\n                const { id, option_id } = item;\n                const matchWith = isBundle ? id : option_id;\n                return requiredOption === matchWith;\n            })\n        ));\n    }\n\n    validateAddToCart() {\n        const {\n            product: { type_id }\n        } = this.props;\n\n        const validationRule = this.validationMap[type_id];\n\n        if (validationRule) {\n            return validationRule();\n        }\n\n        return this.validateSimpleProduct();\n    }\n\n    addGroupedProductToCart() {\n        const {\n            product,\n            product: { items },\n            groupedProductQuantity,\n            addProduct\n        } = this.props;\n\n        Promise.all(items.map((item) => {\n            const { product: groupedProductItem } = item;\n\n            const newProduct = {\n                ...groupedProductItem,\n                parent: product\n            };\n\n            const quantity = groupedProductQuantity[groupedProductItem.id];\n\n            if (!quantity) {\n                return Promise.resolve();\n            }\n\n            return addProduct({\n                product: newProduct,\n                quantity\n            });\n        })).then(\n            /** @namespace Component/AddToCart/Container/addGroupedProductToCartPromiseAllThen */\n            () => this.afterAddToCart(),\n            /** @namespace Component/AddToCart/Container/addGroupedProductToCartPromiseAllCatch */\n            () => this.resetLoading()\n        );\n    }\n\n    addConfigurableProductToCart() {\n        const {\n            product,\n            quantity,\n            addProduct,\n            configurableVariantIndex,\n            productOptionsData\n        } = this.props;\n\n        addProduct({\n            product: {\n                ...product,\n                configurableVariantIndex\n            },\n            quantity,\n            productOptionsData\n        }).then(\n            /** @namespace Component/AddToCart/Container/addConfigurableProductToCartAddProductThen */\n            () => this.afterAddToCart(),\n            /** @namespace Component/AddToCart/Container/addConfigurableProductToCartAddProductCatch */\n            () => this.resetLoading()\n        );\n    }\n\n    addSimpleProductToCart() {\n        const {\n            product,\n            quantity,\n            addProduct,\n            productOptionsData\n        } = this.props;\n\n        addProduct({\n            product,\n            quantity,\n            productOptionsData\n        }).then(\n            /** @namespace Component/AddToCart/Container/addSimpleProductToCartAddProductThen */\n            () => this.afterAddToCart(),\n            /** @namespace Component/AddToCart/Container/addSimpleProductToCartAddProductCatch */\n            () => this.resetLoading()\n        );\n    }\n\n    addProductToCart() {\n        const {\n            product: { type_id }\n        } = this.props;\n\n        const addToCartHandler = this.addToCartHandlerMap[type_id];\n\n        if (addToCartHandler) {\n            addToCartHandler();\n            return;\n        }\n\n        this.addSimpleProductToCart();\n    }\n\n    buttonClick() {\n        const {\n            product: { type_id },\n            onProductValidationError\n        } = this.props;\n\n        if (!this.validateAddToCart()) {\n            onProductValidationError(type_id);\n            return;\n        }\n\n        this.setState({ isLoading: true }, () => this.addProductToCart());\n    }\n\n    resetLoading() {\n        this.setState({ isLoading: false });\n    }\n\n    removeProductFromWishlist() {\n        const {\n            wishlistItems,\n            removeFromWishlist,\n            configurableVariantIndex,\n            product: { type_id, variants = {} } = {}\n        } = this.props;\n\n        if (type_id !== 'configurable') {\n            return;\n        }\n\n        const { sku } = variants[configurableVariantIndex];\n\n        const wishlistItemKey = Object.keys(wishlistItems)\n            .find((key) => {\n                const { wishlist: { sku: wSku } } = wishlistItems[key];\n                return wSku === sku;\n            });\n\n        if (!isSignedIn() || wishlistItemKey === undefined) {\n            return;\n        }\n\n        const { wishlist: { id: item_id } } = wishlistItems[wishlistItemKey];\n        removeFromWishlist({ item_id, sku, noMessage: true });\n    }\n\n    afterAddToCart() {\n        const {\n            showNotification,\n            setQuantityToDefault\n        } = this.props;\n\n        showNotification('success', __('Product added to cart!'));\n        setQuantityToDefault();\n\n        this.removeProductFromWishlist();\n        this.setState({ isLoading: false });\n    }\n\n    render() {\n        return (\n            <AddToCart\n              { ...this.props }\n              { ...this.state }\n              { ...this.containerFunctions }\n            />\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddToCartContainer);\n","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1608291340256\n      var cssReload = require(\"!../../../../node_modules/css-hot-loader/hotModuleReplacement.js\")(module.id, {\"fileMap\":\"{fileName}\"});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);;\n    }\n  ","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nexport { default } from './AddToCart.container';\n"],"sourceRoot":""}